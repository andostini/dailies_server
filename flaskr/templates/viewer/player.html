
{% extends 'viewer/viewer.html' %}

{% block header %}
<script type="text/javascript" src="../static/js/player.js"></script>



{% endblock %}

{% block content %}


<div class="col-md-6 col-sm-12 playback">
  <div class="card">
    <div class="card-header">
      <h3 class="h5" style="float: left">Project Library</h3>
      <div style="float: right" class="btn-group btn-group-toggle" data-toggle="buttons">
        <label class="btn btn-primary">
          <input onclick="makeProjectLibrary('scene', 'asc')" type="radio" name="view" id="Toggle_list-view" autocomplete="off" checked=""><i class="fas fa-bars"></i>
        </label>
        <label class="btn btn-primary">
          <input onclick="makeProjectLibrary('scene', 'asc')"type="radio" name="view" id="Toggle_list-thumbnail-view" autocomplete="off"><i class="fas fa-list"></i>
        </label>
        <label class="btn btn-primary active">
          <input onclick="makeProjectLibrary('scene', 'asc')" type="radio" name="view" id="Toggle_thumbnail-view" autocomplete="off"><i class="fas fa-th"></i>
        </label>
      </div>
    </div>
    <div class="d-flex justify-content-center">
      <div class="spinner-grow text-primary m-5" role="status" id="libloader">
        <span class="sr-only">Loading...</span>
      </div>
    </div>
    <div class="card-body p-0">

      <div class="table-responsive-sm" id="list-view">
        <table class="table table-sm table-hover">
          <thead>
            <tr>
              <th id="playbackList_thumbheader" style="display: none">#</th>
              <th ondblclick="makeProjectLibrary('scene', 'desc')" onclick="makeProjectLibrary('scene', 'asc')" colspan="3">Scene</th>
              <th ondblclick="makeProjectLibrary('clipname', 'desc')" onclick="makeProjectLibrary('clipname', 'asc')">Clipname</th>
              <th ondblclick="makeProjectLibrary('camera', 'desc')" onclick="makeProjectLibrary('camera', 'asc')">Cam</th>
              <th ondblclick="makeProjectLibrary('reel', 'desc')" onclick="makeProjectLibrary('reel', 'asc')">Reel</th>
              <th>Res.</th>
              <th onrightclick="makeProjectLibrary('label', 'desc')" onclick="makeProjectLibrary('label', 'asc')">Label</th>
            </tr>
          </thead>
          <tbody id="playbackList">
          </tbody>
        </table>
      </div>
      <div class="row row-cols-2 row-cols-sm-3 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 p-3" id="thumbnail-view">
      </div>
      <hr>
      <h4 class="h6">Filter</h4>
      <div class="form form-inline p-1">
          <input onkeyup="makeProjectLibrary('scene', 'asc')" type="text" class="covideo form-control form-control-sm" placeholder="Scene" id="filterByScene">
          <input onkeyup="makeProjectLibrary('scene', 'asc')" type="text" class="covideo form-control form-control-sm" placeholder="Shot" id="filterByShot">
          <input onkeyup="makeProjectLibrary('scene', 'asc')" type="text" class="covideo form-control form-control-sm" placeholder="Take" id="filterByTake">
          <input onkeyup="makeProjectLibrary('scene', 'asc')" type="text" class="covideo form-control form-control-sm" placeholder="Clipname" id="filterByClipname">
          <input onkeyup="makeProjectLibrary('scene', 'asc')" type="text" class="covideo form-control form-control-sm" placeholder="Cam" id="filterByCamera">
          <input onkeyup="makeProjectLibrary('scene', 'asc')" type="text" class="covideo form-control form-control-sm" placeholder="Reel" id="filterByReel">
      </div>
      <div class="form form-inline p-1">
        <ul>
          <li><input onchange="makeProjectLibrary('scene', 'asc')" checked class="form-check-input" type="checkbox" id="filterBy_">No Label</li>
          <li><input onchange="makeProjectLibrary('scene', 'asc')" checked class="form-check-input" type="checkbox" id="filterBy_waste_clip">Waste Clip</li>
          <li><input onchange="makeProjectLibrary('scene', 'asc')"  checked class="form-check-input" type="checkbox" id="filterBy_normal_take">Normal Take</li>
          <li><input onchange="makeProjectLibrary('scene', 'asc')" checked class="form-check-input" type="checkbox" id="filterBy_good_take">Good Take</li>
          <li><input onchange="makeProjectLibrary('scene', 'asc')" checked class="form-check-input" type="checkbox" id="filterBy_fav_take">Fav Take</li>
        </ul>
      </div>
      {% if session['username'] == 'dit'%}
      <a class="nav-link btn btn-primary" href="/viewer/{{ project['id'] }}/upload">Upload</a>
      <a class="nav-link btn btn-primary" href="/viewer/{{ project['id'] }}/meta">Meta Editor </a>
      {% endif %}
    </div>
  </div>
</div>


<div class="col-md-6 liveview">
  <div class="card">
    <div class="card-header">
      <ul class="nav nav-tabs card-header-tabs">
        <li class="nav-item">
        <a class="nav-link toggleCam" onclick="CovideoPlayer_tabbing('Playback');this.classList.add('active')">View Playback</a>
      </li>
        <li class="nav-item">
          <a class="nav-link active toggleCam cameraA" onclick="CovideoPlayer_tabbing('cameraA');this.classList.add('active')">Camera A</a>
        </li>
        <li class="nav-item">
          <a class="nav-link toggleCam" onclick="CovideoPlayer_tabbing('cameraB');this.classList.add('active')">Camera B</a>
        </li>
        <li class="nav-item">
          <a class="nav-link toggleCam" onclick="CovideoPlayer_tabbing('cameraC');this.classList.add('active')">Camera C</a>
        </li>
        <li class="nav-item">
          <a class="nav-link toggleCam" onclick="CovideoPlayer_tabbing('cameraD');this.classList.add('active')">Camera D</a>
        </li>
      </ul>
    </div>
    <div class="card-body CovideoPlayerTab" id="cameraA">
      <h5 class="card-title">Live View</h5>
      <h6 class="card-subtitle">Camera A</h6>
      {{ liveStreams[0]|safe }}
    </div>
    <div class="card-body CovideoPlayerTab" id="cameraB" style="display: none">
      <h5 class="card-title">Live View</h5>
      <h6 class="card-subtitle">Camera B</h6>
      {{ liveStreams[1]|safe }}
    </div>
    <div class="card-body CovideoPlayerTab" id="cameraC" style="display: none">
      <h5 class="card-title">Live View</h5>
      <h6 class="card-subtitle">Camera C</h6>
      {{ liveStreams[2]|safe }}
    </div>
    <div class="card-body  CovideoPlayerTab" id="cameraD" style="display: none">
      <h5 class="card-title">Live View</h5>
      <h6 class="card-subtitle">Camera D</h6>
      {{ liveStreams[3]|safe }}
    </div>
    <div class="card-body CovideoPlayerTab" id="Playback" style="display: none">
      <p>Please select a clip from the Project Libraray</p>
    </div>
  </div>
</div>



<script type="text/javascript">
  var projectId = {{ project['id'] }};
  get_CovideoLibrary({{ project['id'] }});
  CovideoPlayer_tabbing('Playback')
</script>
{% endblock %}
